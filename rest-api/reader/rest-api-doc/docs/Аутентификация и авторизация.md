Аутентификация и авторизация — важные механизмы безопасности для RESTful API, обеспечивающие защиту от несанкционированного доступа к ресурсам и управляемый доступ к действиям. Эти процессы играют ключевую роль в защите данных и выполнении действий, требующих специальных прав.
### **Аутентификация**

Аутентификация — это процесс проверки личности пользователя или приложения, который взаимодействует с API. Она подтверждает, что клиент является тем, за кого себя выдаёт.
##### **API Key (ключи API)**
API Key — это уникальный ключ, выданный клиенту для аутентификации при использовании API. Этот метод часто используется для интеграций с публичными API.

**Пример передачи ключа API в заголовке**:
```http
Authorization: Api-Key <api_key>
```
**Пример передачи ключа в URL**:
```http
GET /api/resource?authorization=<api_key>
```
При неудачной аутентификации сервер вернет статус-код **401**.
### **Авторизация**

Авторизация — это процесс проверки прав пользователя на выполнение определённых действий или доступ к определённым ресурсам. В RESTful API авторизация проверяется на основе роли пользователя или уровня доступа, который ему предоставлен.
##### **Ролевая модель (Role-based Access Control, RBAC)**
В ролевой модели права доступа предоставляются на основе ролей. У каждого пользователя может быть одна или несколько ролей, каждая из которых имеет свои права на доступ к определённым ресурсам или действиям.

**Пример ролей**:

  - **Admin**: Полные права на чтение, создание, изменение и удаление.
  - **User**: Ограниченные права, например, только на чтение и изменение своих данных.

**Пример проверки прав**:

  Если у пользователя роль `Admin`, он может выполнять запрос `DELETE /api/users/123`, в то время как пользователю с ролью `User` это будет запрещено.
### Пример полного процесса аутентификации и авторизации:

**Запрос на аутентификацию**:
Пользователь отправляет свои учетные данные для получения токена:
```http
POST /api/login HTTP/1.1
Content-Type: application/json

{
 "login": "john_doe",
 "password": "secret"
}
```
**Получение токена**:
После успешной аутентификации сервер возвращает токен:
```json
{
 "token": "<jwt_token>"
}
```
**Доступ к защищённым ресурсам с токеном**:
Клиент использует токен для выполнения запросов к защищённым ресурсам:
```http
GET /api/users/123 HTTP/1.1
Authorization: Bearer <jwt_token>
```
Если токен не верный, то сервер возвращает ошибку:
```http
HTTP/1.1 401 Unauthorized
```
**Проверка прав доступа (авторизация)**:
На сервере проверяется, может ли пользователь с данным токеном (например, с ролью `Admin`) выполнить запрос к ресурсу `/api/users/123`. Если у пользователя недостаточно прав, сервер возвращает ошибку:
```http
HTTP/1.1 403 Forbidden
```
